+++
showonlyimage = true
draft = false
image = "img/projects/er-99.jpg"
date = "2022-09-09T09:09:09+05:00"
title = "ER-99 WebAudio Typescript Drum Synth"
weight = 0
categories = ["projects"]
+++

I built a free [browser-based drum machine](https://extralifeinstruments.com/er-99) using the WebAudio API to celebrate 9/09 day 2022!

<!--more-->

Some press coverage:
 - "[There's Now a Playable Online Drum Machine Based on the Roland TR-909](https://mixmag.net/read/online-drum-machine-roland-tr-909-er-99-virtual-instrument-tech) (*mixmag*)
 - "[Make your own techno and acid beats with this fun and free online clone of the legendary TR-909 drum machine](https://boingboing.net/2022/09/27/make-your-own-techno-and-acid-beats-with-this-fun-and-free-online-tr-909-drum-machine-clone.html) (*BoingBoing*)
 - "[Try this Free Online Drum Machine Based on the Roland TR-909](https://djmag.com/tech/try-free-online-drum-machine-based-roland-tr-909) (*DJ Magazine*)
 - "[Get a free 909-style drum machine in your browser"](https://www.musicradar.com/news/free-909-drum-machine-browser)  (*MusicRadar*)
 - "[Celebrate 909 day with a virtual ER-99 Rhythm Machine in your browser"](https://www.gearnews.com/celebrate-909-day-with-a-virtual-er-99-rhythm-machine-in-your-browser/)(*Gearnews.com*)
 - "[Free drum synth for 909 day"](https://sonicstate.com/news/2022/09/09/free-drum-synth-for-909-day/) (*Sonic State*)
 - "[ER-99 Online Web-Based Roland TR-909 Emulator by Extralife Instruments"](https://www.matrixsynth.com/2022/09/er-99-online-web-based-roland-tr-909.html) (*matrixsynth*)
 - "[Play the 909 in your browser with the ER-99 emulation"](https://musictech.com/news/gear/909-er-99-browser-drum-machine-day-roland/) (*MusicTech*)


{{< rawhtml >}}
<iframe width="560" height="315" src="https://www.youtube.com/embed/3-Zrz8xg-ms/" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

{{< /rawhtml >}}

All of the drums are synthesized using virtual analog oscillators, noise, and filters. The hi-hats, crash, and ride cymbals are produced from sampled audio. I took up this project as a way to learn TypeScript and made extensive use of its Interface system to define instrument classes and reusable audio components.

The percussive elements mostly consist of triangle wave oscillators with simple pitch envelopes blended with heavily filtered white noise. The original circuit's noise generation used many different filters on the same noise source to produce lots of clicky impact sounds. The use of RC filters also introduces frequency-dependent phase shifts into each channel's noise signal, which allows multiple drums to be played simultaneously from the same noise source without just doubling the volume. 


Bringing the instrument into the web domain allowed me to expand its feature set, adding preset/patch storage, tunable sample playback, and extensive instrument parameter control.

![ER-99 Interface detail](/img/projects/er-99-detail.png)

Designing the visual look of the instrument was a new challenge for me, and I decided to incorporate some tactile and skeumorphic elements like subtle plastic textures and moving keyswitches to replicate the feel of the original hardware . The immediate visual feedback from switches and bright red pseudo seven-segment display add much-needed confirmation of user actions that may not have immediate audible results. The responsive design also allows the machine to be used on tablets and mobile devices for an even more tactile experience. The UI makes extensive use of Google's [Space Mono](https://fonts.google.com/specimen/Space+Mono), a retro fixed-width font that adds a playful element to the highly rectilinear interface.


The complete source code is [available on Github](https://github.com/matthewcieplak/er-99).
Most of the technical details were sourced from [Network-909's in-depth analysis](http://www.network-909.de/circuit.htm) of the original analog circuitry, along with some dissection of Ableton/Cycling74's native Drum synth instruments, which are based on the same circuits. 
